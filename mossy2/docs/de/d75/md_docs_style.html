<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>MOSSY: Mossy Recommended Coding Guidelines</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">MOSSY
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('de/d75/md_docs_style.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Mossy Recommended Coding Guidelines </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This document aims to describe the recommended coding guidelines for the C and C++ code on the Mossy operating system. As these guidelines are recommendations, you may choose to ignore one or more of the recommendations, if you do, point out the violation and provide rationale for you violation in the source file. However for both rules and violations rationales <em>MUST</em> be provided so maintainers can recognize when a rule or violation is either not relevant and can be ignored or a rule that no longer serves a purpose so the rule can be rewritten/evicted.</p>
<h1>File Guidelines </h1>
<p>File names and directories should always be written so they they can be typed on a standard US-104 keyboard without any modifiers with the exception of shift.</p>
<h2>Legal Header</h2>
<p>All files should start off with Apache 2.0 license header. The name field should contain the full name of the appropriate person, the appropriate person depends on the file type, If the file is a header the name field should be filled in with the maintainer, otherwise the author should be filled in. The year field should be the four digit creation year with a hyphen and the two digit year of the last major modification. For example if a file was created in the year 2013 and last majorly modified in 2015 the year field should be 2013-15. The indentation can be with either tabs or spaces, however the URL must be indented twice as much as the rest of text. If tabs are used the indentation should be 1 tab stop. if spaces are used the indentation may be 1, 2, or 4 spaces.</p>
<h4>rationale</h4>
<p>By ensuring that all file begin with a legal header, we allow anyone who views a single file without context to be aware of the license of the file without having to find to find the original file project. It also allows an easy place to put who to contact about an inquiries about the file.</p>
<h2>Header Files</h2>
<p>Header files meant for inclusion by arbitrary files should use an extension of <code>.h</code> or <code>.hpp</code> The correct extension to use depends on weather there is code in the header file. If there is code in the header file use <code>.hpp</code> otherwise use <code>.h</code>. If you are unsure if your header contains code the test to use is, if you just include the file in a source file does the resultant <code>.o</code> file's <code>.text</code> section grow in size, if it does the header is considered to have code.</p>
<h4>rationale</h4>
<p>Separation of code including and non code including header files allows for the includer of the header to recognize that this file increases code size.</p>
<h3>Partial Include Headers</h3>
<p>If the header file is not meant for inclusion by arbitrary files and is instead meant for inclusion by only one, or a small subset of header files the extension should be <code>.hinc</code>. These header should only ever be included by other header. If you need to include a <code>.hinc</code> file outside of libc or libc++ the include should be commented with saying that it is intentional. ex </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;blah.hinc&gt;</span> <span class="comment">//style-check: intentional include</span></div>
</div><!-- fragment --><p> As the comment is parsed by the style checker the comment should be in that format.</p>
<h4>rationale</h4>
<p>Partial Include Headers improve the maintainability of a complex codebase. As most often they will be used in the standard library an exemption to the documented inclusion helps keep the noise down while still providing security against accidental inclusion in most cases.</p>
<p>After the Legal Header a header file should contain exactly one blank line then <code>#pragma once</code>, then the headers includes and macros, see Include Ordering for guidelines on ordering includes and macros. If the header has a namespace there should be another blank line then the namespace deceleration.</p>
<h4>rationale</h4>
<p>Consistent Header beginnings create a more uniform and familiar working environment</p>
<h2>Source Files</h2>
<p>C source files should always have the extension <code>.c</code> and C++ source files should always have the extension <code>.cpp</code>. Source files should usually have an associated header file. After the Legal Header a source file should contain exactly one blank line then the headers includes and macros, see Include Ordering for guidelines on ordering includes and macros. If the header has a namespace there should be another blank line then the namespace deceleration. C++ source files are required to be in a namespace</p>
<h4>rationale</h4>
<p>Consistent file beginnings create a more uniform and familiar working environment. Namespaced Source files reduce the chance of symbol collisions</p>
<h2>Include Ordering</h2>
<p>Includes in files should follow the 'Include What You Use' principle, in that if you require the definition of function or type, you should include the header that exports that. One exception to the principle is that a source file that includes an associated header file does not need to re include the headers included by the associated header.</p>
<p>The ordering of includes should be as follows</p><ol type="1">
<li>associated header file</li>
<li>libc headers (math.h, string.h, ...)</li>
<li>libc++ headers (memory.h, utility.h, ...)</li>
<li>unicode headers (unicode.h, iterators.h, ...)</li>
<li>test headers (test.h, ...)</li>
<li>hal headers (<a class="el" href="../../d8/d4b/hal_8h.html">hal/hal.h</a>, <a class="el" href="../../d3/d20/hal_2hal_2paging_8h.html">hal/paging.h</a>, ...)</li>
<li>sys headers (<a class="el" href="../../dc/d25/fb_8h.html">sys/fb.h</a>, <a class="el" href="../../d2/dd8/scheduler_8h.html">sys/scheduler.h</a>, ...)</li>
<li>arch headers (<a class="el" href="../../d4/d2b/x86_2idt_8h.html">x86/idt.h</a>, <a class="el" href="../../d3/d0e/x64_2idt_8h.html">x64/idt.h</a>, ...)</li>
<li>vendor headers (pc/pit.h, ...)</li>
<li>acpi headers (<a class="el" href="../../d3/d61/acpi_8h.html">acpi.h</a>, <a class="el" href="../../dd/d91/MADT_8h.html">acpi/tables/MADT.h</a>, ...)</li>
<li>other includes ("blah.h", ...) When you have two or more includes from the same group they should be in alphabetical order. Macros should, whenever possible, follow the includes, and should not be intermixed.</li>
</ol>
<h4>rationale</h4>
<p>By removing extraneous includes, compile time can be kept to a minimum, and by not relying on headers to have a particular file included, refactors can happen smoother and quicker.</p>
<p>Having a consistent location for each header allows you to quickly determine if a header is or is not present, much like a dictionary. </p><hr/>
 <h1>Style Guidelines </h1>
<p>This portion is for changes that should, after symbol renaming, result in no changes to the resultant object files. So enforcement of this section is mandatory.</p>
<h2>Indentation and Alignment</h2>
<p>Indentation to the current Indent level <em>MUST</em> be done with tabs. Alignment to other lines <em>MUST</em> be done with spaces. ex </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;---&gt;if(...) {</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;---&gt;---&gt;some_code(a,</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;---&gt;---&gt;··········b);</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;---&gt;}</div>
</div><!-- fragment --><h4>rationale</h4>
<p>The combination of Indentation using tabs and Alignment using spaces, often called smart tabs, offer a superior editing experience, than either a tab only solution, or a space only solution. Both tab only and space only, require that the editor use the indent size that was chosen by the file author. However smart tabs allow the editor to use whatever indent size they prefer. ex </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;//2 space indent size</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;-&gt;if(...) {</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;-&gt;-&gt;some_code(a,</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;-&gt;-&gt;··········b);</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;-&gt;}</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;//4 space indent size</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;---&gt;if(...) {</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;---&gt;---&gt;some_code(a,</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;---&gt;---&gt;··········b);</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;---&gt;}</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;//7 space indent size</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;------&gt;if(...) {</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;------&gt;------&gt;some_code(a,</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;------&gt;------&gt;··········b);</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;------&gt;}</div>
</div><!-- fragment --> <h3>Determining Indent Level</h3>
<p>Determining Indent Level is a necessary skill when using smart tabs, as you must precisely determine when the indentation stops and the alignment begins. The Indentation level for a file starts at 0 at the top and increases by 1 at the start of a block and decreases bu 1 at the end of a block with a few exceptions. Most blocks start with <code>{</code> and end with <code>}</code> however not all blocks do. An exception to the Indentation Level is that access modifiers such as <code>public:</code> or <code>private:</code> are at 1 less Indentation Level than the blocks normal Indentation Level ex. </p><div class="fragment"><div class="line"><span class="keyword">class </span>foo {</div>
<div class="line">    <span class="keywordtype">int</span> bar;</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="keywordtype">int</span> foobar;</div>
<div class="line">}</div>
</div><!-- fragment --><h4>rationale</h4>
<p>Having a definite method for determining Indent level is critical to making sure code is consistant across revisions and editors. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Mar 23 2015 20:00:13 for MOSSY by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
